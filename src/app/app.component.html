<div class="toolbar" role="banner">
    <div class="coin-container" [ngClass]="{ 'animation': isLoading }" (click)="sound.currentTime = 0; sound.play();">
        <i class="nes-icon coin is-medium" [ngClass]="{ 'animation': isLoading }"></i>
    </div>
    <h3>{{ title }}</h3>
    <button type="button" class="nes-btn is-warning" style="margin-right: 10px"
        (click)="settingsdialog.style.display = 'block'">T</button>
</div>

<div class="content" role="main">
    <div class="flex-row">
        <div class="nes-input-container">
            <label for="name_amount">Amount</label>
            <input type="number" id="name_amount" class="nes-input" [(ngModel)]="amount">
        </div>
        <div class="nes-input-container" style="width: 120%">
            <label for="user_select">User</label>
            <div class="nes-select">
                <select required id="user_select" [(ngModel)]="user">
                    <option value="Oleg">Oleg</option>
                    <option value="Hanna">Hanna</option>
                </select>
            </div>
        </div>
    </div>

    <div class="flex-row">
        <div class="nes-input-container">
            <label for="category_select">Category</label>
            <div class="nes-select">
                <select required id="category_select" [(ngModel)]="category">
                    <option *ngFor="let c of categories" [ngValue]="c[0]">{{c[0]}}</option>
                </select>
            </div>
        </div>

        <div>
            <button [disabled]="!this.token || isLoading " class="nes-btn"
                [ngClass]="{ 'is-disabled': !this.token || isLoading }" (click)="getCategories()">R</button>
        </div>
    </div>

    <div class="nes-input-container">
        <label for="name_comment">Comment</label>
        <input type="text" id="name_comment" class="nes-input" [(ngModel)]="comment">
    </div>

    <button [disabled]="!this.user || !this.token || !this.amount || !this.category || isLoading" class="nes-btn"
        [ngClass]="{ 'is-disabled': !this.user || !this.token || !this.amount || !this.category || isLoading }"
        (click)="addClick()" (click)="sound.play();">Add</button>

</div>

<div #settingsdialog id="favDialog">
    <form method="dialog" class="nes-dialog is-rounded">
        <p class="title">Settings</p>
        <div class="nes-input-container">
            <label for="name_token">Token:</label>
            <input type="text" id="name_token" class="nes-input" [(ngModel)]="token"
                [ngModelOptions]="{standalone: true}">
        </div>
        <menu class="dialog-menu">
            <button class="nes-btn is-primary" (click)="settingsdialog.style.display = 'none'">OK</button>
        </menu>
    </form>
</div>

<div #errordialog id="favDialog">
    <form method="dialog" class="nes-dialog is-rounded">
        <p class="title">Error</p>
        <p style="word-break: break-all">{{errorMessage}}</p>
        <menu class="dialog-menu">
            <button class="nes-btn is-primary" (click)="errordialog.style.display = 'none'">OK</button>
        </menu>
    </form>
</div>

<audio #sound preload="auto" src="./assets/smb_coin.wav"></audio>